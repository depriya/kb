# Copyright (C) Microsoft Corporation.

config:
  # The version of the vECU
  version: 0.1.0

  # The description of the vECU
  description: The vECU is a virtualized ECU that runs on a VM in Azure

  # The author of the vECU
  author: Microsoft

  software_stack:
    os:
      name: Yocto OS
      build:
        repo_owner: <GITHUB_ORG>
        repo_name: <GITHUB_REPO>
        # See scenarios/vecu_builder_guide/yocto_os/README.md for more details on how to build a Yocto OS.
        workflow_id: sdv_toolchain_yocto_os_build.yml
        # The Azure Key Vault name that contains the github PAT
        keyvault_name: <KEY_VAULT_NAME>

    middleware:
      orchestration_blueprint:
        orchestrator: eclipse-ankaios
        install_script: install_blueprint.sh
        copy_files:
          src_dir: /workspaces/sdv-toolchain/scenarios/orchestration_blueprint_guide/include/orchestration_blueprint
          dst_dir: /tmp/orchestration_blueprint

  symphony:
    # Home directory for Symphony files that are generated by the toolchain from this metamodel
    toolchain_output_path: /workspaces/sdv-toolchain/output/scenarios/orchestration_blueprint_guide
    base_url: http://localhost:8082/v1alpha2

  vecu:
    # The name of the vECU
    name: vecu_toolchain_demo
    version: v1

    # The software stack to be installed on the vECU
    software_stack: config.software_stack

    domains:
      # TODO: will be implemented later
      - id: <GUID>
        name: Infotainment
        image_definition_name: aosp

      - id: <GUID>
        name: Body Control
        image_definition_name: android

  virtual_environment:
    # The Azure-specific configuration
    location: <LOCATION>
    subscription_id: <SUBSCRIPTION_ID>

    devcenter_name: <DEV_CENTER_NAME>
    devcenter_project_name: <DEV_CENTER_PROJECT_NAME>
    devcenter_catalog_name: <DEV_CENTER_CATALOG_NAME>

    compute_gallery_name: <COMPUTE_GALLERY_NAME>
    compute_gallery_resource_group: <COMPUTE_GALLERY_RESOURCE_GROUP>
    image_definition_name: <IMAGE_DEFINITION_NAME>
    image_version_number: <IMAGE_VERSION_NUMBER>

    vnet_resource_group: <VNET_RESOURCE_GROUP>
    vnet_name: <VNET_NAME>

  notification:
    # The notification configuration
    # The notification will be sent to the specified email address
    email:
      # The Azure Key Vault name that contains the email connection string
      keyvault_name: <KEY_VAULT_NAME>
      # The sender email address that is defined in your Email Communication Service -> Azure domain -> Mailfrom addresses
      sender: <SENDER_EMAIL>@<GUID>.azurecomm.net>
      recepients:
        - <FIRST>@<YOUR_DOMAIN>.com
        - <SECOND>@<YOUR_DOMAIN>.com

extensions:
  providers:
    - provider: local filesystem
      location: /workspaces/sdv-toolchain/scenarios/common/extensions/
      staging_directory: /workspaces/sdv-toolchain/scenarios/common/extensions/

# 'targets' (str) - The path to the targets file. *.j2 means that it is a jinja2 template. Path is relative to the model file (this file).
#    'os.environ' will be passed as 'env' to the template.
#    'config' section from above will be passed as 'config' to the template.
#
# 'targets' (dict) - The targets dictionary (as they would be in the targets file).
targets: /workspaces/sdv-toolchain/scenarios/orchestration_blueprint_guide/include/vecu_targets.yaml.j2

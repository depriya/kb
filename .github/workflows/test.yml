name: Deploy.test.devbox

on:
  workflow_dispatch:
  
permissions:
    id-token: write
    contents: write
    
jobs:
      build:
        runs-on: ubuntu-latest
        environment: sub-AVL_DevopsPilot
    
        steps:
          - name: 'Az CLI login'
            uses: azure/login@v1
            with:
              client-id: ${{ secrets.AZURE_CLIENT_ID }}
              tenant-id: ${{ secrets.AZURE_TENANT_ID }}
              subscription-id: ${{ secrets.AZURE_SUBSCRIPTION_ID }}
    
          - name: Checkout code
            uses: actions/checkout@v2


        #   #- name: Run config.sh
        #     run: |
        #      chmod +x environment/devbox/trigger.sh  # Make sure the script is executable
        #      cd environment/devbox
        #      ./trigger.sh

          - name: Run PowerShell script
            shell: pwsh
            run: |
               cd environment/devbox
               ./trigger.ps1
           